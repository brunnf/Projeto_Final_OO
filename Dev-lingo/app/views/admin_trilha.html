<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Admin - Gerenciar Trilha Python</title>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <h1>Painel de Admin - Trilha Python</h1>
            <div class="header-actions">
                <a href="/logout" class="btn btn-logout">Sair</a>
            </div>
        </header>

        <div class="main-action-bar">
             <a href="/admin/modulo/novo" class="btn btn-create">+ Criar Novo Módulo</a>
        </div>

        <div class="trilha-list">
            <% for modulo in trilha: %>
            <div class="modulo-item">
                <div class="modulo-header">
                    <h2>#{{modulo['id']}} - {{modulo['titulo']}}</h2>
                    <div class="actions">
                        <a href="/admin/modulo/editar/{{modulo['id']}}" class="btn btn-edit">Editar Módulo</a>
                        <a href="/admin/modulo/apagar/{{modulo['id']}}" onclick="return confirm('Tem certeza?')" class="btn btn-delete">Apagar Módulo</a>
                    </div>
                </div>
                <p>{{modulo['descricao']}}</p>

                <div class="sub-list">
                    <h4>Aulas</h4>
                    <% if not modulo['aulas']: %>
                        <p class="empty-state">Nenhuma aula adicionada a este módulo.</p>
                    <% end %>
                    <% for aula in modulo['aulas']: %>
                        <div class="sub-item"><span>{{aula['titulo']}}</span></div>
                    <% end %>
                    <a href="/admin/modulo/{{modulo['id']}}/aula/novo" class="btn btn-add">+ Adicionar Aula</a>
                </div>

                <div class="sub-list">
                    <h4>Questões</h4>
                    <% if not modulo['questoes']: %>
                        <p class="empty-state">Nenhuma questão adicionada a este módulo.</p>
                    <% end %>
                    <% for questao in modulo['questoes']: %>
                        <div class="sub-item"><span>{{questao['enunciado']}}</span></div>
                    <% end %>
                    <a href="/admin/modulo/{{modulo['id']}}/questao/nova" class="btn btn-add">+ Adicionar Questão</a>
                </div>
            </div>
            <% end %>
        </div>
    </div>
</body>
</html>